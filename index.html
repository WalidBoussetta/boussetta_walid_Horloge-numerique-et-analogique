<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Horloge combinée — Analogique + Numérique</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}

    :root{
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #7dd3fc;
      --muted: #9aa6b2;
      --glass: rgba(255,255,255,0.04);
      --hand-width: 3px;
      --size: 220px; /* base size for a clock */
      color-scheme: dark;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    html,body{
      height:100%;
      background:linear-gradient(180deg,var(--bg),#041024 80%);
      color:#e6eef8;
      overflow-x:hidden;
    }

    body{
      display:block;
      padding:60px 200px 60px;
    }

    .app{
      max-width:1100px;
      width:100%;
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    header h1{font-size:1.15rem;color:var(--accent);margin:0}
    header p{color:var(--muted);margin:0 0 0 12px;font-size:0.9rem}

    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:18px}
    .controls > *{background:var(--card);padding:10px;border-radius:12px;box-shadow:0 6px 14px rgba(3,7,18,0.6)}



    /* small screens */
    @media (max-width:520px){:root{--size:180px}.controls{flex-direction:column;align-items:stretch}}

    /* smooth spinning for seconds when we update more frequently */
    .second{transition:transform 0.12s linear}

    /* toggles */
    .small-muted{font-size:0.78rem;color:var(--muted)}

    /* simple input styles for color pickers */
    input[type=color]{border-radius:6px;border:0;padding:4px}



  </style>
</head>
<body>
    <div class="app">
    
    <header>
      <div style="display:flex;align-items:center;gap:12px">
        <h1>Horloge combinée</h1>
        <p class="small-muted">Analogique + Numérique — Multi-fuseaux, personnalisable, responsive</p>
      </div>
      <div class="small-muted">Temps local: <span id="localNow">--:--:--</span></div>
    </header>

    <div class="controls" id="controls">
      <div class="select">
        <label for="tzSelect" class="small-muted">Ajouter fuseau</label>
        <select id="tzSelect" title="Choisir un fuseau horaire"></select>
        <button class="btn" id="addTz">+ Ajouter</button>
      </div>

      <div class="toggle">
        <label class="small-muted">Afficher</label>
        <label class="small-muted" style="margin-left:8px"><input type="checkbox" id="showAnalog" checked> Analog</label>
        <label class="small-muted" style="margin-left:8px"><input type="checkbox" id="showDigital" checked> Numérique</label>
      </div>

      <div class="color">
        <label class="small-muted">Couleur</label>
        <input type="color" id="accentPicker" value="#7dd3fc" title="Accent color">
      </div>

      <div class="select">
        <label class="small-muted">Format</label>
        <select id="hourFormat"><option value="24">24h</option><option value="12">12h</option></select>
      </div>

    </div>

    <main class="grid" id="clocks"></main>

    <footer style="margin-top:18px;color:var(--muted);font-size:0.9rem">Made with ❤️ —Walid Boussetta MI2A—  using the API <code>Intl.DateTimeFormat</code> for timezone accuracy</footer>
  </div>

  <script>
    // fi souret maa saret erreur lel intl 
    const timeZones = [
      'UTC','Europe/Paris','Europe/London','America/New_York','America/Los_Angeles','Asia/Tokyo','Asia/Dubai','Australia/Sydney','Africa/Tunis'
    ];

    const tzSelect = document.getElementById('tzSelect');
    const addTzBtn = document.getElementById('addTz');
    const clocksContainer = document.getElementById('clocks');
    const showAnalog = document.getElementById('showAnalog');
    const showDigital = document.getElementById('showDigital');
    const accentPicker = document.getElementById('accentPicker');
    const hourFormat = document.getElementById('hourFormat');
    const localNow = document.getElementById('localNow');

    
    //take the api from the intl susing the function populate timezones
    function populateTZs(){
      let zones = [];
      // objet global intl (nrml ykun dima mawjoud fel nav moderne)
      if (Intl && typeof Intl.supportedValuesOf === 'function'){
        try{ zones = Intl.supportedValuesOf('timeZone'); } //api
        catch(e){ zones = timeZones; }  // fallback if they throw an error
      } else {
        zones = timeZones;
      }

      //on vide le contenu precedent du selecteur
      tzSelect.innerHTML='';
      zones.forEach(z=>{
        const opt = document.createElement('option'); opt.value = z; opt.textContent = z; tzSelect.appendChild(opt);
      });
    }
    populateTZs(); 

    //---------------------------------------------------------------------------------

  </script>

</body>